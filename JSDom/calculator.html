const grid = document.createElement("div");
grid.id = "calculator-grid";
document.body.appendChild(grid);

const input = document.createElement("input");
input.type = "text"; // Changed to text to allow multi-step expressions
input.readOnly = true; 
grid.appendChild(input);

// Button definitions [Label, Class]
const buttons = [
    ['C', 'operator'], ['/', 'operator'], ['*', 'operator'], ['-', 'operator'],
    ['7', ''], ['8', ''], ['9', ''], ['+', 'operator'],
    ['4', ''], ['5', ''], ['6', ''], ['=', 'equals'],
    ['1', ''], ['2', ''], ['3', ''],
    ['0', ''], ['.', '']
];

buttons.forEach(([label, className]) => {
    const btn = document.createElement("button");
    btn.innerText = label;
    if (className) btn.classList.add(className);
    
    btn.addEventListener('click', () => handleInput(label));
    grid.appendChild(btn);
});

function handleInput(val) {
    if (val === 'C') {
        input.value = "";
    } else if (val === '=') {
        try {
            // eval() is used here for simplicity in a basic project
            input.value = eval(input.value);
        } catch {
            input.value = "Error";
        }
    } else {
        input.value += val;
    }
}
